import {
  Examples,
  Input,
  Output,
  Figure,
  PostLayout,
  Simulators,
  Solution,
  Subtask,
} from "components";

export const meta = {
  title: "짠돌이 구단주",
  year: 2023,
  stage: "Round 1",
};

export default ({ children }) => (
  <PostLayout meta={meta}>{children}</PostLayout>
);

네오는 피파 온라인 게임을 좋아한다.
오랫동안 사용하던 팀을 팔고 새로운 팀을 구성하려 한다.

<div style={{ display: "flex" }}>
  <Figure
    src="/2023/5-1.57a795bc4b7c5c9a.png"
    width={6000}
  />
</div>

네오가 현재 구매할 수 있는 선수 카드들에는 다음과 같은 정보가 주어진다:
포지션, 오버롤, 가격, 급여, 선수의 이름.

모든 선수의 이름은 다르다.
같은 선수의 카드가 여러 개 존재할 수 있고 이 경우 포지션은 항상 동일하다.

네오는 새로운 팀을 총 $11$ 명으로 구성하고자 한다.
포지션별로 `GK`는 정확히 $1$ 명, `DF`는 $3$ 명 이상 $5$ 명 이하,
`MF`는 $2$ 명 이상 $5$ 명 이하,
`FW`는 $1$ 명 이상 $4$ 명 이하로 구성할 수 있다.
같은 선수를 여러 번 선택할 수 없다.

두 가지 종류의 비용이 있다.
처음 선수를 데려올 때 지급해야 하는 비용, 즉, 선수 카드의 가격이 있고,
주기적으로 선수에게 지급해야 하는 비용, 즉, 선수 카드의 급여가 있다.
예산의 한계로 구매하려는 선수 카드의 가격의 합은 네오가 가진 돈 $M$을 넘을 수 없고,
리그의 규제로 급여의 합은 $120$을 넘을 수 없다.

예를 들어서, 다음 표와 같이 $16$ 개의 선수 카드가 있고,
네오가 가진 돈 $M$이 $60$이라고 하자.

| 번호 | 포지션  | 오버롤 | 가격 | 급여 | 이름 |
|-----|---------|--------|------|------|------|
|  $1$ | `GK`    | $20$   | $3$  | $5$  | `na` |
|  $2$ | `GK`    | $30$   | $5$  | $10$ | `nb` |
|  $3$ | `DF`    | $10$   | $2$  | $5$  | `nc` |
|  $4$ | `DF`    | $10$   | $3$  | $5$  | `nc` |
|  $5$ | `DF`    | $15$   | $3$  | $10$ | `nd` |
|  $6$ | `DF`    | $15$   | $4$  | $10$ | `ne` |
|  $7$ | `DF`    | $20$   | $5$  | $15$ | `nf` |
|  $8$ | `DF`    | $20$   | $6$  | $15$ | `ng` |
|  $9$ | `MF`    | $15$   | $2$  | $5$  | `nh` |
|  $10$| `MF`    | $15$   | $2$  | $5$  | `ni` |
|  $11$| `MF`    | $20$   | $3$  | $10$ | `nj` |
|  $12$| `MF`    | $20$   | $4$  | $15$ | `nk` |
|  $13$| `MF`    | $20$   | $5$  | $15$ | `nl` |
|  $14$| `MF`    | $20$   | $6$  | $20$ | `nl` |
|  $15$| `FW`    | $20$   | $10$ | $20$ | `nm` |
|  $16$| `FW`    | $30$   | $15$ | $30$ | `nm` |

`GK`로 $2$번 선수 카드를,
`DF`로 $3$, $5$, $6$, $7$번 선수 카드를,
`MF`로 $9$, $10$, $11$, $12$, $13$번 선수 카드를,
`FW`로 $15$번 선수 카드를 선택하면
오버롤의 합이 최대인 팀을 구성한다.
이때, `GK`는 $1$ 명, `DF`는 $4$ 명, `MF`는 $5$ 명, `FW`는 $1$ 명으로 조건을 만족한다.
가격의 합은 $45$, 급여의 합은 $120$, 오버롤의 합은 $200$이다.

$N$ 개의 선수 카드 정보가 주어지고,
위의 제약 조건을 만족하면서 $11$ 명으로 이루어진 팀을 구성할 때,
가능한 오버롤의 합의 최댓값을 구하는 프로그램을 작성하시오.


## 입력 형식

첫 줄에 선수 카드의 수 $N$과 네오가 가진 돈을 나타내는 수 $M$이
공백으로 구분되어 주어진다.
($11 \le N \le 500;$ $20 \le M \le 120$)

이어지는 $N$ 개의 줄의 $i$ 번째 줄에는 $i$ 번 카드에 대한 정보가 주어진다.
각 줄은 $i$ 번 카드의 선수의 포지션을 나타내는 문자열,
오버롤을 나타내는 정수 $A_{i}$,
가격을 나타내는 정수 $B_{i}$,
급여를 나타내는 정수 $C_{i}$,
선수의 이름을 나타내는 문자열이
공백으로 구분되어 주어진다.
($1 \le A_i \le 100;$ $1 \le B_i \le M;$ $1 \le C_i \le 120$)

포지션을 나타내는 문자열은 `GK`, `DF`, `MF`, `FW` 중 하나이며,
모든 선수의 이름은 영어 알파벳 소문자로만 이루어진 길이 $10$ 이하의 문자열이다.


## 출력 형식

첫 줄에 팀을 구성할 때 선택한 선수 카드의 오버롤 합의 최댓값을 출력한다.
만약, 팀을 구성하는 방법이 없다면 $-1$을 출력한다.

## 예제

<Examples>
  {/* prettier-ignore */}
  <Input>
16 60
GK 20 3 5 na
GK 30 5 10 nb
DF 10 2 5 nc
DF 10 3 5 nc
DF 15 3 10 nd
DF 15 4 10 ne
DF 20 5 15 nf
DF 20 6 15 ng
MF 15 2 5 nh
MF 15 2 5 ni
MF 20 3 10 nj
MF 20 4 15 nk
MF 20 5 15 nl
MF 20 6 20 nl
FW 20 10 20 nm
FW 30 15 30 nm
  </Input>
  {/* prettier-ignore */}
  <Output>
200
  </Output>
</Examples>

## 예제 설명

주어진 입력 예제는 문제 본문에서 설명한 것과 같다.

## 채점 방식

입력 케이스들은 다음과 같은 종류로 구별되며, 한 종류의 케이스를 다 맞혀야 그 종류에 배정된 점수를 받을 수 있다.

<Subtask index={1} score={16}>
  $N \le 20$
</Subtask>
<Subtask index={2} score={15}>
  모든 카드의 가격이 같고, 모든 카드의 급여가 같다.
</Subtask>
<Subtask index={3} score={31}>
  한 선수의 카드가 여러 개 주어지지 않는다.
</Subtask>
<Subtask index={4} score={38}>
  추가적인 제한 조건이 없음.
</Subtask>

## 해설

<Solution>
`GK`, `DF`, `MF`, `FW` 각각에 대해 다음과 같은 동적계획법을 돌린다:
$$
D_{GK}[i][j][k][l] = \text{첫 번째부터 }i\text{ 번째 GK 선수까지 }i\text{명의 선수가 있을 때 그중 }j\text{명을 선발하고 사용한 돈이 }k\text{원, 사용한 급여가 }l\text{원일 때 오버롤 합의 최댓값}\\\
D_{DF}[i][j][k][l] = \text{첫 번째부터 }i\text{ 번째 DF 선수까지 }i\text{명의 선수가 있을 때 그중 }j\text{명을 선발하고 사용한 돈이 }k\text{원, 사용한 급여가 }l\text{원일 때 오버롤 합의 최댓값}\\\
D_{MF}[i][j][k][l] = \text{첫 번째부터 }i\text{ 번째 MF 선수까지 }i\text{명의 선수가 있을 때 그중 }j\text{명을 선발하고 사용한 돈이 }k\text{원, 사용한 급여가 }l\text{원일 때 오버롤 합의 최댓값}\\\
D_{FW}[i][j][k][l] = \text{첫 번째부터 }i\text{ 번째 FW 선수까지 }i\text{명의 선수가 있을 때 그중 }j\text{명을 선발하고 사용한 돈이 }k\text{원, 사용한 급여가 }l\text{원일 때 오버롤 합의 최댓값}
$$
사실 엄밀히 말해서 `GK`의 경우 한 선수만 선발하므로 동적계획법이 필요하지 않다.

위 네 개의 배열을 종합하여, 문제에서 요구하는 답을 구할 수 있다.
다만, 단순 계산으로 연산 횟수를 계산할 경우 시간제한 안에 알고리즘이 동작하지 않아보일 수 있는데,
가능한 입력 데이터들에 대해 가지치기가 많이 되어 넉넉하게 시간제한 안에 동작한다.
</Solution>
